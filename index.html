<!doctype html>
<html data-version="0.0.150" data-landing-name="girls-best" data-env="production-archive" data-template-hash-by-main="9937288fde8f960bb45cdf3f204443a30b08112083c888bd60d5b4da4d2b4a42" data-template-hash-by-html="906d21d8b771d76cbb20610696f930a30112eaf7c651091305bb5d7237ef255a" data-template-hash-by-css="916bdfa8ae192e7986652fe1764dad3531c3dc9b3721542c5c375bc5d4765873" data-template-hash-by-js="cada7e4c2af7ba75211234a9ed0b3f63601ba85828bce2e8f88fca829fe7c4d1">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Today's Gifts</title>

    <script>
    var APP_CONFIG = {
        "domain": "https://jup9.com",
        "mainExit_currentTab_zoneId": 10218575,
        "mainExit_newTab_zoneId": 10218574,
        "reverse_zoneId": 10218573,
        "push_zoneId": 10218578,
        "autoexit_zoneId": 10218576,
        "autoexit_timeToRedirect": 90,
        "back_zoneId": 10218577,
        "back_count": 10
    };
    </script>
    <script>"use strict";(()=>{var H=()=>{let e=new Date,r=e.getUTCFullYear(),s=String(e.getUTCMonth()+1).padStart(2,"0"),c=String(e.getUTCDate()).padStart(2,"0"),t=String(e.getUTCHours()).padStart(2,"0"),o=String(e.getUTCMinutes()).padStart(2,"0"),a=String(e.getUTCSeconds()).padStart(2,"0"),i=String(e.getUTCMilliseconds()*1e3).padStart(6,"0");return`${r}-${s}-${c} ${t}:${o}:${a}.${i} +00:00`};var w=(i=>(i.Error="Error",i.RangeError="RangeError",i.ReferenceError="ReferenceError",i.SecurityError="SecurityError",i.SyntaxError="SyntaxError",i.TypeError="TypeError",i.Unknown="Unknown",i))(w||{}),x=(s=>(s.rejectionhandled="rejectionhandled",s.unhandledrejection="unhandledrejection",s))(x||{}),se=()=>{let e=window.syncMetric;if(!e){console.log("Sync metric is not initialized");return}let r=()=>{var o;(((o=document.querySelector("html"))==null?void 0:o.getAttribute("data-env"))||"")==="production-archive"&&!Object.keys(APP_CONFIG).length&&e({event:"error",errorMessage:"Empty APP_CONFIG",errorSubType:"EmptyAppConfig",errorType:"CUSTOM"})},s=t=>{if(t.filename.includes("extension"))return;let o=`errorMessage: ${t.message}, lineNumber: ${t.lineno}, columnNumber: ${t.colno}, file: ${t.filename}`,a=t.error.name&&Object.values(w).includes(t.error.name)?t.error.name:"Unknown";e({event:"error",errorMessage:o,errorSubType:a,errorType:"JS"})},c=t=>{var u,d,g;if(typeof t.reason=="object"&&((d=(u=t.reason)==null?void 0:u.stack)!=null&&d.includes("extension")))return;let o=typeof t.reason=="object"&&((g=t.reason)!=null&&g.message)?t.reason.message:JSON.stringify(t.reason),a=t.type,i=Object.values(x).includes(a)?a:"Unknown";e({event:"unhandledRejection",errorMessage:o,errorSubType:i,errorType:"JS"})};window.addEventListener("error",s),window.addEventListener("unhandledrejection",c),r()};se();var N="events_history",y=()=>{try{let e=sessionStorage.getItem(N);return e?JSON.parse(e):[]}catch(e){return e instanceof Error&&window.syncMetric&&window.syncMetric({event:"error",errorMessage:e.message,errorType:"CUSTOM",errorSubType:"EventsHistoryGet"}),[]}},I=e=>{try{sessionStorage.setItem(N,JSON.stringify(e))}catch(r){r instanceof Error&&window.syncMetric&&window.syncMetric({event:"error",errorMessage:r.message,errorType:"CUSTOM",errorSubType:"EventsHistorySave"})}};var P=()=>{let e=window.location.search,r=new URLSearchParams(e).get("lang"),s=navigator.language.split("-")[0];return r||s||"en"};var p="data-template-hash-by-",ae={main:`${p}main`,html:`${p}html`,css:`${p}css`,js:`${p}js`},oe={main:"",html:"",css:"",js:""};var M=()=>window.templateHashes?JSON.stringify(window.templateHashes):null;var n=new URL(window.location.href),C,D,B,$,j,F,k,z,G,J,A,U,O,L,V,q,R,X,Y,l={pz:(C=n.searchParams.get("pz"))!=null?C:"",tb:(D=n.searchParams.get("tb"))!=null?D:"",tb_reverse:(B=n.searchParams.get("tb_reverse"))!=null?B:"",ae:($=n.searchParams.get("ae"))!=null?$:"",z:(j=n.searchParams.get("z"))!=null?j:"",var:(F=n.searchParams.get("var"))!=null?F:"",var_1:(k=n.searchParams.get("var_1"))!=null?k:"",var_2:(z=n.searchParams.get("var_2"))!=null?z:"",var_3:(G=n.searchParams.get("var_3"))!=null?G:"",b:(J=n.searchParams.get("b"))!=null?J:"",campaignid:(A=n.searchParams.get("campaignid"))!=null?A:"",abtest:(U=n.searchParams.get("abtest"))!=null?U:"",rhd:(O=n.searchParams.get("rhd"))!=null?O:"1",s:(L=n.searchParams.get("s"))!=null?L:"",ymid:(V=n.searchParams.get("ymid"))!=null?V:"",wua:(q=n.searchParams.get("wua"))!=null?q:"",use_full_list_or_browsers:(R=n.searchParams.get("use_full_list_or_browsers"))!=null?R:"",cid:(X=n.searchParams.get("cid"))!=null?X:"",geo:(Y=n.searchParams.get("geo"))!=null?Y:""};var ie={start:"start",ageExit:"age_exit",mainExit:"main_exit",push:"push",autoexit:"autoexit",back:"back",reverse:"reverse",tabUnderClick:"tab_under_click",error:"error",unhandledRejection:"unhandled_rejection",template_hash_ready:"template_hash_ready",template_hashes_ready:"template_hashes_ready"},ce=H(),le=()=>l.abtest?l.abtest:APP_CONFIG.abtest?String(APP_CONFIG.abtest):void 0,Q=({event:e,exitZoneId:r,errorMessage:s,errorSubType:c,errorType:t,skipHistory:o})=>{var E,b,S,f;let a=(E=document.querySelector("html"))==null?void 0:E.dataset,i=(a==null?void 0:a.landingName)||"",u=(a==null?void 0:a.version)||"",d=(a==null?void 0:a.env)||"",g=window.location.host,_=ie[e]||e,Z=P(),ee=30,v=Date.now(),m=y(),T=m[m.length-1],te=T?v-T.currentTs:0;o||(m.push({currentTs:v,eventName:_,delta:te}),m.length>=ee&&m.shift(),I(m));let re=[{app:"landings-constructor",event:_,language:Z,landing_name:i,build_version:u,landing_domain:g,landing_url:window.location.href,exit_zone_id:r?Number(r):void 0,template_hash:(b=window.templateHash)!=null?b:"",request_var:l.var_3,source_zone_id:Number.isNaN(Number(l.var_2))?null:Number(l.var_2),sub_id:l.var_1,landing_load_date_time:ce,error_message:s!=null?s:"",ab2r:le(),events_history:y(),context:JSON.stringify({template_hashes:JSON.parse((S=M())!=null?S:"{}")}),error_sub_type:c,error_type:t,env:d}],ne=(f=APP_CONFIG.isAnalyticEnabled)!=null?f:!0;return{eventData:re,isAnalyticEnabled:ne}};function h({url:e,data:r}){var c;return((c=window==null?void 0:window.navigator)==null?void 0:c.sendBeacon(e.toString(),r?JSON.stringify(r):void 0))?Promise.resolve():Promise.reject(new Error("sendBeacon failed"))}var K=e=>{let r;(o=>o[o.BAD_REQUEST=400]="BAD_REQUEST")(r||(r={}));let s="https://wuytl.com",c=new URL(`${s}/sync-metrics`);h({url:c,data:e}).catch(t=>{t.status!==400&&h({url:c,data:e}).catch(()=>{console.error(`Metrics sync failed: ${e}`)})})};var W=e=>{let{eventData:r,isAnalyticEnabled:s}=Q(e);s&&K(r)};window.syncMetric=W;W({event:"start"});})();</script>
    <script>"use strict";(()=>{var u=(t=>(t.CUSTOM="CUSTOM",t.JS="JS",t))(u||{}),g=(r=>(r.FetchPlatformVersion="FetchPlatformVersion",r.GetIntlDateTimeFormat="GetIntlDateTimeFormat",r.GetTranslations="GetTranslations",r.EventsHistoryGet="EventsHistoryGet",r.EventsHistorySave="EventsHistorySave",r.PushStateToHistory="PushStateToHistory",r.Reverse="Reverse",r.TemplateHash="TemplateHash",r.TemplateHashes="TemplateHashes",r.DesignChange="DesignChange",r.EmptyAppConfig="EmptyAppConfig",r.ReadSurveyConfig="ReadSurveyConfig",r))(g||{}),y=(n=>(n.Error="Error",n.RangeError="RangeError",n.ReferenceError="ReferenceError",n.SecurityError="SecurityError",n.SyntaxError="SyntaxError",n.TypeError="TypeError",n.Unknown="Unknown",n))(y||{}),p=(t=>(t.rejectionhandled="rejectionhandled",t.unhandledrejection="unhandledrejection",t))(p||{});const h=()=>{const s=window.syncMetric;if(!s){console.log("Sync metric is not initialized");return}const d=()=>{var o;(((o=document.querySelector("html"))==null?void 0:o.getAttribute("data-env"))||"")==="production-archive"&&!Object.keys(APP_CONFIG).length&&s({event:"error",errorMessage:"Empty APP_CONFIG",errorSubType:"EmptyAppConfig",errorType:"CUSTOM"})},t=e=>{if(e.filename.includes("extension"))return;const o=`errorMessage: ${e.message}, lineNumber: ${e.lineno}, columnNumber: ${e.colno}, file: ${e.filename}`,a=e.error.name&&Object.values(y).includes(e.error.name)?e.error.name:"Unknown";s({event:"error",errorMessage:o,errorSubType:a,errorType:"JS"})},m=e=>{var i,c,l;if(typeof e.reason=="object"&&((c=(i=e.reason)==null?void 0:i.stack)!=null&&c.includes("extension")))return;const o=typeof e.reason=="object"&&((l=e.reason)!=null&&l.message)?e.reason.message:JSON.stringify(e.reason),a=e.type,n=Object.values(p).includes(a)?a:"Unknown";s({event:"unhandledRejection",errorMessage:o,errorSubType:n,errorType:"JS"})};window.addEventListener("error",t),window.addEventListener("unhandledrejection",m),d()};h();})();</script>

   <style>
    /* БАЗА И ФОН */
    body { 
        margin: 0; padding: 0; min-height: 100vh; font-family: 'Arial', sans-serif; cursor: pointer; 
        background: radial-gradient(circle at center, #fff3e0 0%, #f5b041 50%, #b9770e 100%);
        overflow-x: hidden;
        color: #5c2a00;
    }
    *, ::after, ::before { box-sizing: border-box; }

    /* КОНТЕЙНЕР ПРИЛОЖЕНИЯ */
    .app-wrapper {
        max-width: 600px; /* Оптимально для мобилок и планшетов */
        margin: 0 auto;
        padding: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* ШАПКА */
    .header {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.2rem;
        font-weight: 900;
        color: #4a2300;
        margin-bottom: 15px;
        text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
    }
    .header img {
        width: 45px;
        margin-right: 10px;
    }

    /* СЕТКА ПРИЗОВ (3x3) */
    .prizes-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        width: 100%;
        background: linear-gradient(180deg, #fbe8a6, #f3c262);
        padding: 10px;
        border-radius: 12px;
        border: 2px solid #e67e22;
        box-shadow: 0 10px 20px rgba(0,0,0,0.3), inset 0 0 15px rgba(255,255,255,0.7);
    }

    /* КАРТОЧКА ПРИЗА */
    .prize-card {
        background: radial-gradient(circle at top, #ffffff, #ffe0b2);
        border: 2px solid #d68910;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 6px;
        position: relative;
        box-shadow: inset 0 -10px 20px rgba(0,0,0,0.05);
        transition: transform 0.2s;
    }
    .prize-card:hover { transform: scale(1.02); }

    /* БЕЙДЖИ И ПОВЕРХНОСТНЫЕ ЭЛЕМЕНТЫ */
    .badge-hot {
        position: absolute;
        top: -6px; left: -6px;
        background: #d32f2f;
        color: white;
        font-size: 10px;
        font-weight: 800;
        padding: 3px 6px;
        border-radius: 4px;
        box-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        z-index: 2;
    }
    .badge-reserved {
        position: absolute;
        top: 30%; left: 50%;
        transform: translate(-50%, -50%) rotate(-5deg);
        background: #e6dac3;
        color: #5c2a00;
        font-weight: 900;
        font-size: 12px;
        padding: 4px 8px;
        border: 2px solid #8d6e63;
        border-radius: 4px;
        box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
        z-index: 2;
        width: 90%;
        text-align: center;
    }

    /* ИЗОБРАЖЕНИЕ ТОВАРА */
    .prize-img {
        width: 100%;
        aspect-ratio: 1/1;
        object-fit: contain;
        margin-bottom: 5px;
    }

    /* ТЕКСТА КАРТОЧКИ */
    .prize-title {
        font-size: 11px;
        font-weight: 800;
        text-align: center;
        margin-bottom: 2px;
        line-height: 1.1;
    }
    .prize-value {
        font-size: 10px;
        color: #d32f2f;
        font-weight: 700;
        margin-bottom: 5px;
    }

    /* КНОПКА CLAIM NOW */
    .claim-btn {
        width: 100%;
        background: linear-gradient(180deg, #f39c12, #d35400);
        color: white;
        border: 1px solid #a04000;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 800;
        padding: 4px 0;
        text-transform: uppercase;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    .btn-green { background: linear-gradient(180deg, #7cb342, #388e3c); border-color: #1b5e20; }

    /* НИЖНЯЯ СЕКЦИЯ С КОРОБКОЙ */
    .mystery-section {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        position: relative;
    }
    .mystery-box {
        width: 140px;
        margin-bottom: -15px; /* Задвигаем коробку немного за кнопку для объема */
        z-index: 1;
        animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
    }

    .tap-reveal {
        background: #fdf2e9;
        color: #873600;
        font-weight: 800;
        padding: 5px 15px;
        border-radius: 20px;
        border: 2px solid #e67e22;
        margin-bottom: 10px;
        z-index: 2;
        box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    }

    /* ГЛАВНАЯ КНОПКА */
    .open-all-btn {
        width: 90%;
        max-width: 300px;
        background: linear-gradient(180deg, #f5b041, #d68910);
        color: #4a2300;
        font-size: 20px;
        font-weight: 900;
        padding: 15px 20px;
        border: 3px solid #f9e79f;
        border-radius: 8px;
        text-transform: uppercase;
        cursor: pointer;
        z-index: 2;
        box-shadow: 0 8px 15px rgba(0,0,0,0.4), inset 0 0 10px rgba(255,255,255,0.6);
        animation: pulseBig 2s infinite;
    }
    @keyframes pulseBig {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); box-shadow: 0 12px 20px rgba(0,0,0,0.5), inset 0 0 15px rgba(255,255,255,0.8); }
    }

    /* СЧЕТЧИК ПОЛЬЗОВАТЕЛЕЙ */
    .viewers {
        margin-top: 10px;
        font-size: 12px;
        font-weight: 700;
        color: #4a2300;
    }
</style>
    <script defer src="./assets/scripts/common.js"></script>

  <script>
    // Оставил твой скрипт для подмены папок с картинками через параметр 'v'
    document.addEventListener("DOMContentLoaded", function() {
        const urlParams = new URLSearchParams(window.location.search);
        const v = urlParams.get('v');
        const images = document.querySelectorAll('.prize-img, .header img, .mystery-box');

        if (v) {
            const folder = 'var-' + v;
            images.forEach((img) => {
                const currentSrc = img.getAttribute('src');
                const newSrc = currentSrc.replace('images/', 'images/' + folder + '/');
                img.setAttribute('src', newSrc);
            });
            console.log("Загружены картинки из папки: " + folder);
        }
    });
</script>
</head>

<body data-target="modal_content">
    
    <div class="app-wrapper">
        
        <div class="header" data-target="modal_content">
            <img src="./assets/images/gift_icon.png" alt="Gift">
            Today's Gifts
        </div>

        <div class="prizes-grid" data-target="modal_content">
            <div class="prize-card" data-target="modal_content">
                <div class="badge-hot">HOT</div>
                <img src="./assets/images/iphone.png" class="prize-img" alt="iPhone 15 Pro">
                <div class="prize-title">iPhone 15 Pro</div>
                <div class="prize-value">Value: $999</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>
            
            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/samsung.png" class="prize-img" alt="Samsung S24 Ultra">
                <div class="prize-title">Samsung S24 Ultra</div>
                <div class="prize-value">Value: $1199</div>
                <button class="claim-btn btn-green">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <div class="badge-reserved">RESERVED</div>
                <img src="./assets/images/airpods.png" class="prize-img" alt="Airpods Pro">
                <div class="prize-title">Airpods Pro</div>
                <div class="prize-value">Value: $249</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/ps5.png" class="prize-img" alt="PS5 Console">
                <div class="prize-title">PS5 Console</div>
                <div class="prize-value">Value: $499</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/amazon.png" class="prize-img" alt="Amazon Gift Card">
                <div class="prize-title">Amazon Gift Card</div>
                <div class="prize-value">Value: $100</div>
                <button class="claim-btn btn-green">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/macbook.png" class="prize-img" alt="Macbook Pro">
                <div class="prize-title">Macbook Pro</div>
                <div class="prize-value">Value: $1999</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/watch.png" class="prize-img" alt="Apple Watch Ultra">
                <div class="prize-title">Apple Watch Ultra</div>
                <div class="prize-value">Value: $799</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/visa.png" class="prize-img" alt="VISA Gift Card">
                <div class="prize-title">VISA Gift Card</div>
                <div class="prize-value">Value: $500</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>

            <div class="prize-card" data-target="modal_content">
                <img src="./assets/images/vacation.png" class="prize-img" alt="Luxury Vacation">
                <div class="prize-title">Luxury Vacation</div>
                <div class="prize-value">Value: $1500</div>
                <button class="claim-btn">CLAIM NOW</button>
            </div>
        </div>

        <div class="mystery-section" data-target="modal_content">
            <img src="./assets/images/mystery_box.png" class="mystery-box" alt="Mystery Box">
            <div class="tap-reveal">Tap to Reveal!</div>
            <button class="open-all-btn">OPEN ALL PRIZES</button>
            <div class="viewers">123 users viewing</div>
        </div>

    </div>

    <script >"use strict";(()=>{const m=typeof window<"u"&&(window.isSecureContext||window.location.protocol==="https:"||window.location.hostname==="localhost");function w(t){return new Promise((e,r)=>{try{if(!m)return r("this feature is available only in secure contexts (HTTPS)");if(!(crypto!=null&&crypto.subtle.digest))return r("crypto.subtle.digest is not available");const n=new TextEncoder;crypto.subtle.digest("SHA-256",n.encode(t)).then(o=>{const s=Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("");e(s)}).catch(r)}catch(n){r(n)}})}function u(t){let e=t;return e=e.replace(/<base.*?>/gm,""),e=e.replace(/var\s+APP_CONFIG\s*=\s*\{[^}]*\};*/gm,""),e=e.replace(/<script[^>]*src=["'].*?hid\.js.*?["'][^>]*><\/script>/gm,""),e=e.replace(/[\r\n]/gm,""),e=e.replace(/\s+/g,""),e.trim()}function l(t){const e=t instanceof Error?t.message:JSON.stringify(t);window.syncMetric&&window.syncMetric({event:"error",errorMessage:e,errorType:"CUSTOM",errorSubType:"TemplateHash"})}(async()=>{var t;try{window.templateHash=null;const e=(t=document.querySelector("html"))==null?void 0:t.dataset,n=`templateHash:${(e==null?void 0:e.landingName)||""}`,o=await cookieStore.get({name:n}),i=!!new URL(window.location.href).searchParams.get("debug");if(!o||o.expires<Date.now()){document.addEventListener("DOMContentLoaded",async()=>{const s=u(document.documentElement.innerHTML);i&&console.log("HTML used for templateHash after DOMContentLoaded",s),w(JSON.stringify([s])).then(async a=>{var c;window.templateHash=a,(c=window.syncMetric)==null||c.call(window,{event:"template_hash_ready"});const d=24*60*60*1e3;cookieStore.set({name:n,value:a,expires:Date.now()+d})}).catch(a=>{l(a)})});return}!window.templateHash&&o.value&&(window.templateHash=o.value,i&&console.log("templateHash after DOMContentLoaded was already sent:",window.templateHash))}catch(e){l(e)}})();})();</script>
    <script >"use strict";(()=>{var F=(c=>(c.Error="Error",c.RangeError="RangeError",c.ReferenceError="ReferenceError",c.SecurityError="SecurityError",c.SyntaxError="SyntaxError",c.TypeError="TypeError",c.Unknown="Unknown",c))(F||{}),J=(n=>(n.rejectionhandled="rejectionhandled",n.unhandledrejection="unhandledrejection",n))(J||{}),me=()=>{let e=window.syncMetric;if(!e){console.log("Sync metric is not initialized");return}let t=()=>{var a;(((a=document.querySelector("html"))==null?void 0:a.getAttribute("data-env"))||"")==="production-archive"&&!Object.keys(APP_CONFIG).length&&e({event:"error",errorMessage:"Empty APP_CONFIG",errorSubType:"EmptyAppConfig",errorType:"CUSTOM"})},n=r=>{if(r.filename.includes("extension"))return;let a=`errorMessage: ${r.message}, lineNumber: ${r.lineno}, columnNumber: ${r.colno}, file: ${r.filename}`,u=r.error.name&&Object.values(F).includes(r.error.name)?r.error.name:"Unknown";e({event:"error",errorMessage:a,errorSubType:u,errorType:"JS"})},o=r=>{var f,l,g;if(typeof r.reason=="object"&&((l=(f=r.reason)==null?void 0:f.stack)!=null&&l.includes("extension")))return;let a=typeof r.reason=="object"&&((g=r.reason)!=null&&g.message)?r.reason.message:JSON.stringify(r.reason),u=r.type,c=Object.values(J).includes(u)?u:"Unknown";e({event:"unhandledRejection",errorMessage:a,errorSubType:c,errorType:"JS"})};window.addEventListener("error",n),window.addEventListener("unhandledrejection",o),t()};me();var j=()=>{var e,t;return typeof window>"u"?!0:(t=(e=window==null?void 0:window.location)==null?void 0:e.search)==null?void 0:t.includes("debug=1")},z=(e,t)=>{j()&&(t!==void 0?console.log(e,t):console.log(e))},L=e=>{j()&&console.group(e)},U=(e,t)=>{j()&&(t!==void 0?console.warn(e,t):console.warn(e))};var T=(r=>(r.MAIN="main",r.HTML="html",r.CSS="css",r.JS="js",r))(T||{});var A={ELEMENT:1,TEXT:3,COMMENT:8},X={key:"data-cs",value:"exclude"},H="data-template-hash-by-",b={main:`${H}main`,html:`${H}html`,css:`${H}css`,js:`${H}js`},w={main:"",html:"",css:"",js:""},P=/var\s+APP_CONFIG\s*=\s*\{[^}]*\};*/gm;var Y={css:{pattern:/\.css$/,htmlRegex:/<link[^>]+href="([^"]+\.css)"/g,initiator:"link"},js:{pattern:/\.js$/,htmlRegex:/<script[^>]+src="([^"]+\.js)"/g,initiator:"script"}};var W=e=>Object.values(Y).some(t=>e.initiatorType===t.initiator&&t.pattern.test(e.name));var D=e=>{var t;return((t=e.match(/\.([a-z0-9]+)(?:\?|$)/i))==null?void 0:t[1])||""},q=e=>{let t={};for(let n of e){let o=n.extension;t[o]||(t[o]=[]),t[o].push(n)}return t},V=e=>(e.startsWith(location.origin)&&(e=e.replace(location.origin,"")),pe(e)),pe=e=>{let t=e.indexOf("/assets/");if(t!==-1)return e.slice(t);if(e.startsWith("./assets/"))return e.slice(1);if(e.startsWith("assets/")||!e.startsWith("/"))return"/"+e;let n=e.lastIndexOf("/"),o=e.slice(n+1);return o?"/"+o:e};var K=async({html:e,resources:t,hashFunction:n})=>{let o=JSON.stringify({html:e,resources:t}),r=JSON.stringify({html:e}),a=q(t),u=Object.entries(a).map(([g,S])=>{let B=S.map(y=>({name:y.name,size:y.size})).sort((y,R)=>y.name.localeCompare(R.name));return[g,JSON.stringify(B)]}),[c,f,...l]=await Promise.all([n(o),n(r),...u.map(([,g])=>n(g))]);return{payload:o,resourcesPayload:a,resourcesHash:{...w,main:c,html:f,...Object.fromEntries(u.map(([g],S)=>[g,l[S]]))}}};var Q=e=>{let t=w;return Object.values(b).forEach(n=>{let o=e.getAttribute(n),r=n.replace(H,"");o!==null&&(t[r]=o)}),t};var Z=e=>e?e.nodeType===A.TEXT?"text":e.nodeType===A.COMMENT?"comment":e.nodeType===A.ELEMENT?"element":"element":"text";var _=e=>{let t={};if(!e)return t;if(typeof e.getAttributeNames=="function"){let n=e.getAttributeNames();for(let o of n){let r=e.getAttribute(o);t[o]=r!=null?r:""}return t}return t},ee=(e,t)=>_(e)[t];var te=e=>{var t,n;return e&&((n=(t=e.content)==null?void 0:t.childNodes)==null?void 0:n.length)>0?Array.from(e.content.childNodes):e&&e.childNodes?Array.from(e.childNodes):[]};var re=e=>e.tagName.toLowerCase();var ne=e=>e.textContent!==void 0&&e.textContent!==null?e.textContent:"";var de=e=>Object.values(b).includes(e),se=e=>{let t=Object.entries(e).filter(([n])=>!de(n)).map(([n,o])=>[n,o!=null?o:""]);return t.sort(([n],[o])=>n.localeCompare(o)),Object.fromEntries(t)};var v=(e,t=null)=>{if(t!=="runtime"&&t!=="build")return null;let n=Z(e);if(n==="comment")return null;if(n==="text"){let l=ne(e).replace(/\s+/g," ").trim();return l?{tag:"#text",attrs:{text:l}}:null}let o=re(e);if(!o||o==="base"||ee(e,X.key)||o==="script"&&e.textContent.match(P))return null;let r=se(_(e)),a=te(e),u=[];for(let f of a){let l=v(f,t);l&&u.push(l)}let c={tag:o};return Object.keys(r).length&&(c.attrs=r),u.length&&(c.children=u),c};var oe=e=>e.getEntriesByType("resource").filter(r=>!!W(r)).map(r=>({name:V(r.name),size:r.decodedBodySize||0,extension:D(r.name)})).sort((r,a)=>r.name.localeCompare(a.name));var x=document.documentElement.cloneNode(!0),ye=async e=>{let n=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(o);return Array.from(r).map(a=>a.toString(16).padStart(2,"0")).join("")},he=async()=>{if(!x)return;let e=v(x,"runtime"),t=oe(performance);return await K({html:e,resources:t,hashFunction:ye})};document.addEventListener("DOMContentLoaded",async()=>{var e,t;try{let n=Q(x);if(!n.main)return;let r=await he();if(!r)return;let{payload:a,resourcesHash:u,resourcesPayload:c}=r,f={};L("[TemplateHash] Payload"),z(a),console.groupEnd(),L(`[TemplateHash] ${Object.keys(u).filter(s=>u[s]!=="").join(", ")}`),Object.entries(u).forEach(([s,i])=>{let m=s,d=n[m];if(!d)return;let I=d===i,C=I?"are identical":"was modified";f[m]={buildHash:d,clientHash:i,equal:I},U(`${s.toUpperCase()} ${C}.
Build hash:   ${d}
Runtime hash: ${i}`)}),console.groupEnd();let l=Object.values(T),g=Object.values(f).some(s=>s.equal===!1);window.templateHashes=Object.fromEntries(Object.entries(f).sort(([s],[i])=>{let m=l.indexOf(s),d=l.indexOf(i);return m!==-1&&d!==-1?m-d:m!==-1?-1:d!==-1?1:s.localeCompare(i)}));let S=s=>s.some(i=>i.startsWith("ad-")||i.includes("adblock")||i.includes("extension")||i.includes("overlay")||i.includes("popup")||i.includes("cookie")||i.includes("consent")||i.includes("banner")),B=s=>s.startsWith("ad_")||s.includes("adblock")||s.includes("extension")||s.includes("chrome")||s.includes("google")||s.includes("react")||s.includes("__"),y=4096,R=150,ie=5,N=[],p={};x.querySelectorAll("*").forEach(s=>{var G;if(s.getAttribute("data-cs")==="exclude")return;let i=s.tagName.toLowerCase();if(i==="base"||i==="script"&&s.textContent.match(P))return;p[i]||(p[i]={count:0,injected:0,hasInlineStyle:0,suspiciousId:0,suspiciousClass:0,inShadowDom:0,isTopLevelInjected:0,isIframe:0,textContent:""});let m=s.hasAttribute("style"),d=s.id?B(s.id):!1,I=S([...s.classList]),C=!!((G=s.getRootNode())!=null&&G.host),ce=x.querySelector("body"),O=s.parentElement===ce&&(i==="div"||i==="iframe"),$=s.tagName==="IFRAME",ue=m||d||I||C||O||$,h=p[i];if(h.count++,ue&&h.injected++,m&&h.hasInlineStyle++,d&&h.suspiciousId++,I&&h.suspiciousClass++,C&&h.inShadowDom++,O&&h.isTopLevelInjected++,$&&h.isIframe++,i==="style"&&N.length<ie){let k=(s.textContent||"").replace(/\s+/g,"").slice(0,R),le=k.replace(/</g,"\\u003C");k&&N.push(le)}}),p.style&&(p.style.textContent="");let ae=JSON.stringify(p).length,M=y-ae-100;if(M>0&&p.style&&N.length){let s="";for(let i of N){let m=(s?";":"")+i;if(m.length>M)break;s+=m,M-=m.length}p.style.textContent=s}JSON.stringify(p).length>y&&p.style&&(p.style.textContent="max_length");let E={...window.templateHashes,tagCounts:{},resources:{}};g&&(E.tagCounts=p,E.resources=c,JSON.stringify(E).length>y&&E.tagCounts.style&&(E.tagCounts.style.textContent="")),window.templateHashes=E,(e=window.syncMetric)==null||e.call(window,{event:"template_hashes_ready"})}catch(n){console.error("Error computing runtime template hash:",n),n instanceof Error&&((t=window.syncMetric)==null||t.call(window,{event:"error",errorMessage:n.message,errorType:"TemplateHashes"}))}});})();
</script>
</body>
</html>
